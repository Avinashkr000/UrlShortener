{"ast":null,"code":"import axios from\"axios\";// ✅ Base API Config\nconst api=axios.create({baseURL:process.env.REACT_APP_API_BASE_URL||\"https://url-shortener-backend-k0pv.onrender.com/api\",headers:{\"Content-Type\":\"application/json\"}});// ✅ API Request Logger\napi.interceptors.request.use(config=>{var _config$method;console.log(\"➡️ Request:\",(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),config.url);return config;},error=>Promise.reject(error));// ✅ API Response Logger\napi.interceptors.response.use(response=>{console.log(\"✅ Response:\",response.status,response.config.url);return response;},error=>{var _error$response;console.error(\"❌ API Error:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);return Promise.reject(error);});// ✅ URL Service\nconst urlService={// 🔹 Shorten URL\nshortenUrl:async function(originalUrl){let expiryDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{const payload={originalUrl:originalUrl,// ✅ backend expects this key\nexpiryAt:expiryDate};const res=await api.post(\"/shorten\",payload);return res.data;}catch(err){var _err$response,_err$response$data;console.error(\"❌ shortenUrl:\",err);throw new Error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to shorten URL\");}},// 🔹 Get all URLs\ngetAllUrls:async()=>{try{const res=await api.get(\"/all\");return res.data;}catch(err){var _err$response2,_err$response2$data;throw new Error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to fetch URLs\");}},// 🔹 Delete URL\n// 🔹 Delete URL (fixed)\ndeleteUrl:async shortCode=>{try{const res=await api.delete(\"/\".concat(shortCode),{responseType:\"text\"});// ✅ tell Axios it's plain text\nconsole.log(\"✅ Delete response:\",res.data);return res.data||\"Deleted successfully\";// fallback\n}catch(err){console.error(\"❌ Delete error:\",err);throw new Error(\"Delete failed\");}},// 🔹 Health Check\nhealthCheck:async()=>{try{const res=await api.get(\"/actuator/health\").catch(()=>api.get(\"/health\"));return res.data;}catch(err){throw new Error(\"Service unavailable\");}}};export default urlService;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_BASE_URL","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","status","_error$response","data","message","urlService","shortenUrl","originalUrl","expiryDate","arguments","length","undefined","payload","expiryAt","res","post","err","_err$response","_err$response$data","Error","getAllUrls","get","_err$response2","_err$response2$data","deleteUrl","shortCode","delete","concat","responseType","healthCheck","catch"],"sources":["D:/new for work/projects/url-shortener/frontend/src/services/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// ✅ Base API Config\r\nconst api = axios.create({\r\n  baseURL:\r\n    process.env.REACT_APP_API_BASE_URL ||\r\n    \"https://url-shortener-backend-k0pv.onrender.com/api\",\r\n  headers: { \"Content-Type\": \"application/json\" },\r\n});\r\n\r\n// ✅ API Request Logger\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    console.log(\"➡️ Request:\", config.method?.toUpperCase(), config.url);\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// ✅ API Response Logger\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log(\"✅ Response:\", response.status, response.config.url);\r\n    return response;\r\n  },\r\n  (error) => {\r\n    console.error(\"❌ API Error:\", error.response?.data || error.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// ✅ URL Service\r\nconst urlService = {\r\n  // 🔹 Shorten URL\r\n  shortenUrl: async (originalUrl, expiryDate = null) => {\r\n    try {\r\n      const payload = {\r\n        originalUrl: originalUrl, // ✅ backend expects this key\r\n        expiryAt: expiryDate,\r\n      };\r\n      const res = await api.post(\"/shorten\", payload);\r\n      return res.data;\r\n    } catch (err) {\r\n      console.error(\"❌ shortenUrl:\", err);\r\n      throw new Error(err.response?.data?.message || \"Failed to shorten URL\");\r\n    }\r\n  },\r\n\r\n  // 🔹 Get all URLs\r\n  getAllUrls: async () => {\r\n    try {\r\n      const res = await api.get(\"/all\");\r\n      return res.data;\r\n    } catch (err) {\r\n      throw new Error(err.response?.data?.message || \"Failed to fetch URLs\");\r\n    }\r\n  },\r\n\r\n  // 🔹 Delete URL\r\n// 🔹 Delete URL (fixed)\r\ndeleteUrl: async (shortCode) => {\r\n  try {\r\n    const res = await api.delete(`/${shortCode}`, { responseType: \"text\" }); // ✅ tell Axios it's plain text\r\n    console.log(\"✅ Delete response:\", res.data);\r\n    return res.data || \"Deleted successfully\"; // fallback\r\n  } catch (err) {\r\n    console.error(\"❌ Delete error:\", err);\r\n    throw new Error(\"Delete failed\");\r\n  }\r\n},\r\n\r\n\r\n  // 🔹 Health Check\r\n  healthCheck: async () => {\r\n    try {\r\n      const res = await api.get(\"/actuator/health\").catch(() => api.get(\"/health\"));\r\n      return res.data;\r\n    } catch (err) {\r\n      throw new Error(\"Service unavailable\");\r\n    }\r\n  },\r\n};\r\n\r\nexport default urlService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}